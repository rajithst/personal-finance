<mat-accordion multi="true">
  @for (data of transactionData; track $index) {
    <mat-expansion-panel class="transaction-panel">
      <mat-expansion-panel-header>
        <mat-panel-title
          >{{ data.year }} - {{ data.month_text }} : ¥{{
            data.total | number: "1.2-2"
          }}</mat-panel-title
        >
        <mat-panel-description></mat-panel-description>
      </mat-expansion-panel-header>
      <table
        mat-table
        [dataSource]="data.transactions_cp"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let element">{{ element.date }}</td>
        </ng-container>

        <ng-container matColumnDef="category">
          <th mat-header-cell *matHeaderCellDef>Category</th>
          <td mat-cell *matCellDef="let element">
            {{ element.category_text }}
          </td>
        </ng-container>
        <ng-container matColumnDef="subcategory">
          <th mat-header-cell *matHeaderCellDef>Sub Category</th>
          <td mat-cell *matCellDef="let element">
            {{ element.subcategory_text }}
          </td>
        </ng-container>
        <ng-container matColumnDef="payment_method">
          <th mat-header-cell *matHeaderCellDef>Payment Method</th>
          <td mat-cell *matCellDef="let element">
            {{ element.payment_method_text }}
          </td>
        </ng-container>
        <ng-container matColumnDef="destination">
          <th mat-header-cell *matHeaderCellDef>Destination</th>
          <td mat-cell *matCellDef="let element">
            {{ element.alias ? element.alias : element.destination }}
          </td>
        </ng-container>
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>Amount</th>
          <td mat-cell *matCellDef="let element">
            ¥{{ element.amount | number: "1.2-2" }}
          </td>
        </ng-container>
        <!--        <ng-container matColumnDef="notes">-->
        <!--          <th mat-header-cell *matHeaderCellDef> Notes </th>-->
        <!--          <td mat-cell *matCellDef="let element"> {{element.notes}} </td>-->
        <!--        </ng-container>-->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let element">
            <button
              mat-icon-button
              matTooltip="Click to Edit"
              class="iconbutton"
              color="primary"
              (click)="editRecord(element, 'update')"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              matTooltip="Click to Delete"
              class="iconbutton"
              color="warn"
              (click)="editRecord(element, 'delete')"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </mat-expansion-panel>
  }
</mat-accordion>

