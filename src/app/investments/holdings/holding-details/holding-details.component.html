<h2 mat-dialog-title>{{data.holdingData.company_name }}  ({{data.symbol}})</h2>
<mat-dialog-content>
  <mat-grid-list cols="3" rowHeight="80px" [gutterSize]="'5px'">
    <mat-grid-tile>
      <mat-card class="detail-card">
        <mat-card-content>
          <div class="company-details">
            <div class="company-image">
              <img src="{{data.holdingData.image}}" alt="" class="ticker-image">
            </div>
            <div class="price-info">
              <div class="price-title">
                <span>Current Value</span>
              </div>
              <div class="price-value">
                {{data.holdingData.stock_currency}}{{data.holdingData.current_price | number: "1.2-2"}}
              </div>
            </div>
          </div>

        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card class="detail-card">
        <mat-card-content>
          <div class="company-details">
            <div class="price-info">
              <div class="price-title">
                <span>Average Purchase Value</span>
              </div>
              <div class="price-value">
                {{data.holdingData.stock_currency}}{{data.holdingData.average_price | number: "1.2-2"}}
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card class="detail-card">
        <mat-card-content>
          <div class="company-details">
            <div class="price-info">
              <div class="price-title">
                <span>Profit/Loss</span>
              </div>
              <div class="price-value" [ngClass]="{'profit': data.holdingData.profit_loss >= 0, 'loss': data.holdingData.profit_loss < 0}">
                {{data.holdingData.stock_currency}}{{data.holdingData.profit_loss | number: "1.2-2"}}
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
  <div class="stock-price-history-chart">
    <app-chartbox
      [chartData]="dailyPrice"
      [chartOptions]="dailyPriceOptions"
      [chartType]="dailyPriceChartType"
      (rendered)="childRendered()"
    ></app-chartbox>
  </div>
  <div class="purchase-history-table">
    <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8 portfolio-table">
      <ng-container matColumnDef="Date">
        <th mat-sort-header mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let element"> {{element.purchase_date}} </td>
      </ng-container>
      <ng-container matColumnDef="Shares">
        <th mat-sort-header mat-header-cell *matHeaderCellDef> Shares </th>
        <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
      </ng-container>
      <ng-container matColumnDef="TotalPurchase">
        <th mat-sort-header mat-header-cell *matHeaderCellDef> Purchase Price </th>
        <td mat-cell *matCellDef="let element"> {{element.stock_currency}}{{element.purchase_price | number: "1.2-2"}} </td>
      </ng-container>
      <ng-container matColumnDef="PurchasePrice">
        <th mat-sort-header mat-header-cell *matHeaderCellDef> Total Purchase </th>
        <td mat-cell *matCellDef="let element"> {{element.stock_currency}}{{element.purchase_price * element.quantity | number: "1.2-2"}} </td>
      </ng-container>
      <ng-container matColumnDef="CurrentValue">
        <th mat-sort-header mat-header-cell *matHeaderCellDef> Current value </th>
        <td mat-cell *matCellDef="let element"> {{element.stock_currency}}{{data.holdingData.current_price * element.quantity | number: "1.2-2"}} </td>-->
      </ng-container>
      <ng-container matColumnDef="Profit">
        <th mat-sort-header mat-header-cell *matHeaderCellDef> Profit </th>
        <td mat-cell *matCellDef="let element">
          <div class="profit-loss"
               [ngClass]="{'profit': data.holdingData.current_price > element.purchase_price, 'loss': data.holdingData.current_price < element.purchase_price }">
            <span>{{element.stock_currency}}{{data.holdingData.current_price * element.quantity - element.purchase_price * element.quantity | number: "1.2-2"}} </span>
          </div>
          <!--        <div class="profit-loss-percentage" [ngClass]="{'profit': element.profit_loss >= 0, 'loss': element.profit_loss < 0}">-->
          <!--          <fa-icon [icon]="element.profit_change_percentage > 0 ? faCaretUp : faCaretDown"></fa-icon>-->
          <!--          {{ element.profit_change_percentage | number: "1.2-2" }} %-->
          <!--        </div>-->
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

</mat-dialog-content>

<mat-dialog-actions align="end" class="expense-form-footer">
  <button mat-raised-button mat-dialog-close>Close</button>
</mat-dialog-actions>
